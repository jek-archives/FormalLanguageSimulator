<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formal Language Simulator - Interactive</title>
    <!-- Tailwind CSS (via CDN for simplicity, or local if preferred) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            850: '#1f2937',
                            900: '#111827',
                            950: '#0b0f19',
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Graphviz for visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js"></script>
    <style>
        /* Custom scrollbar for log areas */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1f2937;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        /* Graphviz SVG styling */
        #automata-svg svg {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body class="bg-gray-950 text-gray-100 font-sans antialiased min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-gray-900 border-b border-gray-800 px-6 py-4 sticky top-0 z-40 shadow-md">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="bg-blue-600 p-2 rounded-lg">
                    <i class="material-icons text-white">dns</i>
                </div>
                <div>
                    <h1 class="text-xl font-bold tracking-tight text-white">Formal Language Simulator</h1>
                    <p class="text-xs text-gray-400">Regex • NFA • DFA • PDA</p>
                </div>
                <div class="flex items-center space-x-4 ml-6">
                    <button onclick="document.getElementById('theory-modal').classList.remove('hidden')"
                        class="text-gray-400 hover:text-white transition-colors text-sm font-medium flex items-center">
                        <i class="material-icons mr-1 text-base">info</i> About / Theory
                    </button>
                    <a href="https://github.com/jek-archives/FormalLanguageSimulator" target="_blank"
                        class="text-gray-400 hover:text-white transition-colors">
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button onclick="AppState.reset()"
                    class="group flex items-center px-4 py-2 text-sm font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 border border-red-400/20 rounded-lg transition-all">
                    <i class="material-icons text-sm mr-2 group-hover:rotate-180 transition-transform">refresh</i>
                    Reset System
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <main class="flex-grow p-6">
        <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-6">

            <!-- LEFT COLUMN: CONTROLS (Span 4) -->
            <div class="lg:col-span-4 space-y-6">

                <!-- Error Container -->
                <div id="error-container" style="display: none;"
                    class="p-4 bg-red-500/10 border border-red-500/50 rounded-lg flex items-start space-x-3 mb-6 animate-pulse">
                    <i class="material-icons text-red-500">error_outline</i>
                    <div class="flex-grow">
                        <h3 class="text-sm font-bold text-red-400">Error</h3>
                        <p id="error-message-text" class="text-xs text-red-300 mt-1">Error message here</p>
                    </div>
                    <button onclick="AppState.clearError()" class="text-red-400 hover:text-red-300">
                        <i class="material-icons text-sm">close</i>
                    </button>
                </div>

                <!-- 1. REGEX CARD -->
                <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-2">
                            <i class="material-icons text-blue-500">code</i>
                            <h2 class="font-bold text-gray-200">Regex Engine</h2>
                        </div>
                        <button onclick="document.getElementById('regex-help-modal').classList.remove('hidden')"
                            class="text-xs flex items-center text-blue-400 hover:text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2 py-1 rounded transition-colors">
                            <i class="material-icons text-[14px] mr-1">help</i> Syntax
                        </button>
                    </div>

                    <div class="space-y-3">
                        <input type="text" id="regex-input-field" value="(a|b)*abb"
                            oninput="AppState.handleRegexChange(this.value)" placeholder="Enter regex (e.g. (a|b)*)"
                            class="w-full bg-gray-800 border border-gray-700 text-white placeholder-gray-500 text-sm rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 block p-3 transition-colors font-mono">

                        <!-- Explanation -->
                        <div class="flex items-start space-x-2 px-1">
                            <i class="material-icons text-gray-500 text-sm mt-0.5">info</i>
                            <p id="regex-explanation" class="text-xs text-gray-400 italic">Matches any string ending in
                                'abb'</p>
                        </div>

                        <button onclick="AppState.generateAutomata()" id="generate-automata-button"
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2.5 px-4 rounded-lg flex items-center justify-center transition-all shadow-lg shadow-blue-900/20 active:scale-[0.98]">
                            <i class="material-icons mr-2 text-sm">account_tree</i> Generate Automata
                        </button>

                        <!-- Quick actions -->
                        <div class="pt-2">
                            <p class="text-[10px] uppercase font-bold text-gray-600 mb-2">Quick Examples</p>
                            <div class="flex flex-wrap gap-2 mb-2">
                                <button onclick="AppState.useExample('(a|b)*abb', 'abb')"
                                    class="px-2 py-1 bg-gray-800 hover:bg-gray-700 border border-gray-700 text-xs text-gray-300 rounded-md transition-colors font-mono">'(a|b)*abb'</button>
                                <button onclick="AppState.useExample('(ab)*', 'abab')"
                                    class="px-2 py-1 bg-gray-800 hover:bg-gray-700 border border-gray-700 text-xs text-gray-300 rounded-md transition-colors font-mono">'(ab)*'</button>
                            </div>

                            <p class="text-[10px] uppercase font-bold text-teal-600 mb-2 mt-3 flex items-center">
                                <i class="material-icons text-[12px] mr-1">biotech</i> Bioinformatics
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <button onclick="AppState.setBioPreset('START')"
                                    class="px-2 py-1 bg-teal-900/20 hover:bg-teal-900/30 border border-teal-700/30 text-xs text-teal-400 rounded-md transition-colors">Start
                                    Codon</button>
                                <button onclick="AppState.setBioPreset('TATA')"
                                    class="px-2 py-1 bg-teal-900/20 hover:bg-teal-900/30 border border-teal-700/30 text-xs text-teal-400 rounded-md transition-colors">TATA
                                    Box</button>
                                <button onclick="AppState.setBioPreset('POLYA')"
                                    class="px-2 py-1 bg-teal-900/20 hover:bg-teal-900/30 border border-teal-700/30 text-xs text-teal-400 rounded-md transition-colors">Poly-A
                                    Tail</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. TEST STRING CARD -->
                <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-5">
                    <div class="flex items-center mb-4 space-x-2">
                        <i class="material-icons text-green-500">check_circle</i>
                        <h2 class="font-bold text-gray-200">Test Matching</h2>
                    </div>

                    <div class="space-y-3">
                        <input type="text" id="string-input-field" value="abb"
                            oninput="AppState.handleTestStringChange(this.value)" placeholder="Test string..."
                            class="w-full bg-gray-800 border border-gray-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 block p-2.5 font-mono">

                        <button onclick="AppState.runTests()" id="test-match-button"
                            class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 rounded-lg flex items-center justify-center shadow-lg shadow-green-900/20 transition-all active:scale-[0.98]">
                            <i class="material-icons mr-2 text-sm">play_arrow</i> Test Match
                        </button>

                        <!-- Suggestions -->
                        <div class="flex flex-wrap gap-2 pt-2">
                            <button onclick="AppState.setTestString('abb')"
                                class="text-xs bg-gray-800 hover:bg-gray-700 px-2 py-1 rounded text-gray-400">abb</button>
                            <button onclick="AppState.setTestString('aabb')"
                                class="text-xs bg-gray-800 hover:bg-gray-700 px-2 py-1 rounded text-gray-400">aabb</button>
                            <button onclick="AppState.generateExamples()"
                                class="text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-green-400 flex items-center">
                                <i class="material-icons text-[10px] mr-1">auto_awesome</i> Suggest
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 3. APPROXIMATE MATCH CARD -->
                <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-5">
                    <div class="flex items-center mb-4 space-x-2 relative group w-max cursor-help">
                        <i class="material-icons text-purple-500">grain</i>
                        <h2 class="font-bold text-gray-200">Approximate Match</h2>
                        <i class="material-icons text-xs text-gray-600">info_outline</i>
                        <div
                            class="absolute left-0 bottom-full mb-2 w-56 bg-black text-white text-[10px] p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50">
                            Uses Levenshtein Automaton for k-mismatch search
                        </div>
                    </div>
                    <div class="space-y-3">
                        <input type="text" id="dna-sequence-field" value="ball"
                            oninput="AppState.handleDnaSequenceChange(this.value)" placeholder="Text to search in..."
                            class="w-full bg-gray-800 border border-gray-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 block p-2.5 font-mono">

                        <div class="flex items-center justify-between">
                            <label class="text-xs text-gray-400">Max Errors (k): <span id="k-value-display"
                                    class="text-purple-400 font-bold">1</span></label>
                            <input type="number" id="max-errors-field" value="1" min="0" max="5"
                                onchange="AppState.handleMaxErrorsChange(this.value)"
                                class="w-20 bg-gray-800 border border-gray-700 text-white text-sm rounded p-1 text-center">
                        </div>

                        <button onclick="AppState.runApproximateMatch()"
                            class="w-full bg-gray-800 hover:bg-gray-700 border border-purple-500/30 text-purple-300 text-sm font-medium py-2 rounded-lg transition-colors flex items-center justify-center">
                            Run Match (Levenshtein)
                        </button>
                    </div>
                </div>

                <!-- 4. PDA CARD -->
                <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-2 relative group w-max cursor-help">
                            <i class="material-icons text-orange-500">layers</i>
                            <h2 class="font-bold text-gray-200">PDA Simulation</h2>
                            <i class="material-icons text-xs text-gray-600">info_outline</i>
                            <div
                                class="absolute left-0 bottom-full mb-2 w-56 bg-black text-white text-[10px] p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50">
                                Uses a Stack to recognize Context-Free Languages
                            </div>
                        </div>
                        <!-- PDA Mode Selector -->
                        <select id="pda-mode-select" onchange="AppState.setPdaMode(this.value)"
                            class="bg-gray-800 border border-gray-700 text-xs text-orange-400 rounded px-2 py-1 outline-none focus:border-orange-500">
                            <option value="anbn">aⁿbⁿ</option>
                            <option value="balanced">Balanced ()</option>
                        </select>
                    </div>

                    <p id="pda-desc" class="text-xs text-gray-500 mb-3">Matches 'a' followed by equal number of 'b's.
                    </p>

                    <div class="flex space-x-2">
                        <input type="text" id="pda-input-field" value="aaabbb"
                            oninput="AppState.handlePdaInputChange(this.value)" placeholder="e.g. aaabbb"
                            class="flex-grow bg-gray-800 border border-gray-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-orange-500 block p-2.5 font-mono">
                        <button onclick="AppState.runPdaSimulation()"
                            class="bg-orange-600/20 hover:bg-orange-600/30 text-orange-400 border border-orange-600/30 p-2.5 rounded-lg transition-colors">
                            <i class="material-icons">play_arrow</i>
                        </button>
                    </div>

                    <!-- PDA Results -->
                    <div id="pda-results-content" class="mt-3" style="display: none;"></div>
                    <div id="pda-results-empty" class="mt-3 text-center text-xs text-gray-600 italic hidden"></div>
                </div>

            </div>
            <!-- END LEFT COLUMN -->


            <!-- RIGHT COLUMN: VISUALIZATION (Span 8) -->
            <div class="lg:col-span-8 space-y-6">

                <!-- MAIN VISUALIZATION CARD -->
                <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg flex flex-col h-[500px]">
                    <!-- Tabs Header -->
                    <div
                        class="bg-gray-850 border-b border-gray-800 px-4 py-3 flex items-center justify-between rounded-t-xl">
                        <div class="flex space-x-1 bg-gray-900 p-1 rounded-lg border border-gray-800">
                            <button id="nfa-tab" onclick="AppState.setActiveDiagramTab('nfa')"
                                class="group relative px-4 py-1.5 text-xs font-medium rounded-md transition-colors text-blue-400 bg-gray-800 shadow-sm flex items-center">
                                NFA Diagram
                                <i class="material-icons text-[10px] ml-1 text-blue-500 opacity-70">info</i>
                                <div
                                    class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 w-48 bg-black text-white text-[10px] p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50">
                                    Thompson's Construction: Constructs an NFA with ε-moves from restrictions (O(m)
                                    states)
                                </div>
                            </button>
                            <button id="dfa-tab" onclick="AppState.setActiveDiagramTab('dfa')"
                                class="group relative px-4 py-1.5 text-xs font-medium rounded-md transition-colors text-gray-400 hover:text-white flex items-center">
                                DFA Diagram
                                <i class="material-icons text-[10px] ml-1 text-gray-500 opacity-70">info</i>
                                <div
                                    class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 w-48 bg-black text-white text-[10px] p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50">
                                    Subset Construction: Converts NFA to DFA. Optimizes for O(n) search time. May cause
                                    2^n state explosion.
                                </div>
                            </button>
                        </div>
                        <button onclick="AppState.downloadDiagram()"
                            class="text-xs text-gray-400 hover:text-white flex items-center px-3 py-1.5 rounded hover:bg-gray-800 transition-colors">
                            <i class="material-icons text-sm mr-2">download</i> Save SVG
                        </button>
                    </div>

                    <!-- Diagram Container -->
                    <div class="flex-grow bg-gray-950 relative" id="diagram-container">
                        <div id="automata-svg" class="w-full h-full flex items-center justify-center text-gray-600">
                            <div class="text-center">
                                <i class="material-icons text-4xl mb-2 opacity-50">hub</i>
                                <p class="text-sm">Generate automata to view diagram</p>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- BOTTOM GRID: LOGS & RESULTS -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                    <!-- Transitions Panel -->
                    <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-5 h-80 flex flex-col">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="font-bold text-gray-200 flex items-center">
                                <i class="material-icons text-gray-500 mr-2 text-sm">list_alt</i> Transitions
                            </h2>
                            <!-- Small Tabs -->
                            <div class="flex text-[10px] space-x-2">
                                <button id="nfa-log-tab" onclick="AppState.setActiveTab('nfa')"
                                    class="text-blue-400 font-bold">NFA</button>
                                <span class="text-gray-700">|</span>
                                <button id="dfa-log-tab" onclick="AppState.setActiveTab('dfa')"
                                    class="text-gray-500 hover:text-gray-300">DFA</button>
                                <span class="text-gray-700">|</span>
                                <button id="grammar-log-tab" onclick="AppState.setActiveTab('grammar')"
                                    class="text-gray-500 hover:text-gray-300">GRAMMAR</button>
                            </div>
                        </div>

                        <!-- Content -->
                        <div id="transitions-panel-empty"
                            class="flex-grow flex items-center justify-center text-gray-600 text-sm">
                            No data available
                        </div>

                        <div id="transitions-panel-content" style="display: none;"
                            class="flex-grow flex flex-col min-h-0">
                            <h3 id="current-automata-title" class="text-xs uppercase font-bold text-gray-500 mb-2">NFA
                                TRANSITIONS</h3>

                            <div class="flex-grow overflow-y-auto custom-scrollbar bg-gray-950 rounded border border-gray-800 p-2 text-xs font-mono space-y-1"
                                id="transition-list-container">
                                <!-- Transitions injected here -->
                            </div>

                            <div class="mt-3 pt-3 border-t border-gray-800 grid grid-cols-2 gap-2 text-xs">
                                <div>
                                    <span class="text-gray-500 block">Start State</span>
                                    <span id="start-state-output" class="text-green-400 font-bold">--</span>
                                </div>
                                <div>
                                    <span class="text-gray-500 block">Final States</span>
                                    <span id="final-states-output" class="text-red-400 break-words">--</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Results Panel -->
                    <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-5 h-80 flex flex-col">
                        <div class="flex items-center mb-4">
                            <i class="material-icons text-gray-500 mr-2 text-sm">history</i>
                            <h2 class="font-bold text-gray-200">Execution Log</h2>
                        </div>

                        <div id="results-panel-empty"
                            class="flex-grow flex items-center justify-center text-gray-600 text-sm">
                            Ready
                        </div>

                        <div id="test-results-content" style="display: none;"
                            class="flex-grow overflow-y-auto custom-scrollbar bg-gray-950 rounded border border-gray-800 p-3 space-y-2">
                            <!-- Results injected here -->
                        </div>
                    </div>

                </div>

            </div>
            <!-- END RIGHT COLUMN -->

        </div>
    </main>

    <footer class="border-t border-gray-800 mt-auto py-6 text-center text-xs text-gray-600">
        Formal Language Simulator &copy; 2025 • Powered by C++ & WebAssembly
    </footer>

    <!-- MODALS -->
    <!-- Syntax Help Modal -->
    <div id="regex-help-modal"
        class="modal hidden fixed inset-0 flex items-center justify-center z-50 bg-black/80 backdrop-blur-sm transition-opacity">
        <div
            class="bg-gray-900 w-full max-w-md p-6 rounded-2xl border border-gray-800 shadow-2xl transform transition-all scale-100">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <i class="material-icons text-blue-500 mr-2">help</i> Syntax Guide
                </h3>

                <button onclick="document.getElementById('regex-help-modal').classList.add('hidden')"
                    class="text-gray-500 hover:text-white">
                    <i class="material-icons">close</i>
                </button>
            </div>

            <div class="space-y-4">
                <div class="p-3 bg-gray-800 rounded-lg flex items-center border border-gray-700">
                    <code class="text-blue-400 font-bold text-lg w-12 text-center">a|b</code>
                    <div class="ml-4">
                        <p class="text-gray-200 font-bold text-sm">Alternation (OR)</p>
                        <p class="text-gray-500 text-xs">Matches either 'a' or 'b'</p>
                    </div>
                </div>
                <div class="p-3 bg-gray-800 rounded-lg flex items-center border border-gray-700">
                    <code class="text-blue-400 font-bold text-lg w-12 text-center">ab</code>
                    <div class="ml-4">
                        <p class="text-gray-200 font-bold text-sm">Concatenation</p>
                        <p class="text-gray-500 text-xs">Matches 'a' followed immediately by 'b'</p>
                    </div>
                </div>
                <div class="p-3 bg-gray-800 rounded-lg flex items-center border border-gray-700">
                    <code class="text-blue-400 font-bold text-lg w-12 text-center">a*</code>
                    <div class="ml-4">
                        <p class="text-gray-200 font-bold text-sm">Kleene Star</p>
                        <p class="text-gray-500 text-xs">Matches 'a' zero or more times</p>
                    </div>
                </div>
                <div class="p-3 bg-gray-800 rounded-lg flex items-center border border-gray-700">
                    <code class="text-blue-400 font-bold text-lg w-12 text-center">( )</code>
                    <div class="ml-4">
                        <p class="text-gray-200 font-bold text-sm">Grouping</p>
                        <p class="text-gray-500 text-xs">Groups operators for precedence</p>
                    </div>
                </div>
            </div>

            <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end">
                <button onclick="document.getElementById('regex-help-modal').classList.add('hidden')"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold">
                    Got it
                </button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="wasm/formal_sim.js"></script>
    <script src="simulator.js"></script>

    <!-- Tab Logic Override for styling (Optional inline shim if needed, but simulator.js handles classes) -->
    <!-- We might need to update simulator.js class names since we changed from .tab.active to custom classes. -->
    <!-- Wait, simulator.js uses: element.className = 'tab active'; -->
    <!-- My new HTML uses Tailwind classes. simulator.js WILL overwrite them and break styling. -->
    <!-- I need to update simulator.js to handle Tailwind classes for tabs! -->

    <!-- Theory Modal -->
    <div id="theory-modal"
        class="modal hidden fixed inset-0 flex items-center justify-center z-50 bg-black/80 backdrop-blur-sm transition-opacity">
        <div
            class="bg-gray-900 w-full max-w-2xl p-6 rounded-2xl border border-gray-800 shadow-2xl transform transition-all scale-100 max-h-[90vh] overflow-y-auto custom-scrollbar">
            <div class="flex justify-between items-center mb-6 border-b border-gray-800 pb-4">
                <h3 class="text-2xl font-bold text-white flex items-center">
                    <i class="material-icons text-purple-500 mr-3">school</i> Project Theory & Design
                </h3>
                <button onclick="document.getElementById('theory-modal').classList.add('hidden')"
                    class="text-gray-400 hover:text-white">
                    <i class="material-icons">close</i>
                </button>
            </div>

            <div class="space-y-6 text-gray-300">

                <div class="bg-gray-950 p-4 rounded-lg border border-gray-800">
                    <h4 class="text-lg font-bold text-blue-400 mb-2">1. Text Search & Regular Languages</h4>
                    <p class="text-sm mb-2 text-gray-400 italic">Requirement: "Search system where user queries are
                        expressed as regular expressions... compiled into NFAs... converted to DFAs."</p>
                    <ul class="list-disc pl-5 text-sm space-y-1">
                        <li><strong>Implementation:</strong> The system takes standard Regex input (e.g.,
                            <code>(a|b)*abb</code>).
                        </li>
                        <li><strong>Mechanism:</strong> It converts Regex to an Non-deterministic Finite Automaton (NFA)
                            using Thompson's Construction, then subsets constructs a Deterministic Finite Automaton
                            (DFA) for O(n) search performance.</li>
                        <li><strong>Visualization:</strong> The "NFA/DFA Diagrams" and "Transitions Table" visualize
                            this compilation process.</li>
                        <li><strong>Grammar:</strong> The "Grammar" view proves these are Regular Languages by
                            generating the equivalent Right-Linear Grammar.</li>
                    </ul>
                </div>

                <div class="bg-gray-950 p-4 rounded-lg border border-gray-800">
                    <h4 class="text-lg font-bold text-purple-400 mb-2">2. Bioinformatics & Approximate Matching</h4>
                    <p class="text-sm mb-2 text-gray-400 italic">Requirement: "Extend finite state machines to handle
                        approximate pattern matching... DNA Sequence Analysis."</p>
                    <ul class="list-disc pl-5 text-sm space-y-1">
                        <li><strong>Implementation:</strong> The "Approximate Match" card allows searching DNA sequences
                            with up to <code>k</code> errors (Levenshtein distance).</li>
                        <li><strong>Mechanism:</strong> Uses dynamic programming/NFA principles to find substrings that
                            match the pattern within the specified error tolerance.</li>
                        <li><strong>Features:</strong> Includes presets for biological markers like Start Codons, TATA
                            Boxes, and Poly-A Tails.</li>
                    </ul>
                </div>

                <div class="bg-gray-950 p-4 rounded-lg border border-gray-800">
                    <h4 class="text-lg font-bold text-orange-400 mb-2">3. Structural Analysis & PDAs</h4>
                    <p class="text-sm mb-2 text-gray-400 italic">Requirement: "XML document validation... implement
                        Pushdown Automata that recognize context-free languages."</p>
                    <ul class="list-disc pl-5 text-sm space-y-1">
                        <li><strong>Context:</strong> Regular languages cannot handle nested structures (like HTML tags
                            or matching brackets).</li>
                        <li><strong>Implementation:</strong> The "PDA Simulation" tab demonstrates Context-Free parsing.
                        </li>
                        <li><strong>Balanced Mode:</strong> specifically validates nested parentheses
                            <code>((()))</code>, simulating RNA loops or XML tag balancing, which a standard DFA cannot
                            natively do.
                        </li>
                    </ul>
                </div>
            </div>

            <div class="mt-6 pt-4 border-t border-gray-800 text-right">
                <button onclick="document.getElementById('theory-modal').classList.add('hidden')"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

</body>

</html>